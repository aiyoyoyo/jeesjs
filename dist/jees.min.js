var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,b,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[b]=a.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var b=0;return $jscomp.iteratorPrototype(function(){return b<c.length?{done:!1,value:c[b++]}:{done:!0}})};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var b=c[Symbol.iterator];return b?b.call(c):$jscomp.arrayIterator(c)};this.jees=this.jees||{};(function(){function c(){this._module_maps=new Map;this._module_id_maps=new Map}var b=c.prototype;b.bind=function(a,b){var d=this._module_id_maps.get(b.id);null==d&&(d=new Set,this._module_id_maps.set(b.id,d));d.has(a)||(d.add(a),d=this._module_maps.get(a),null==d&&(d=new Set,this._module_maps.set(a,d)),d.has(b)||d.add(b))};b.unbind=function(a){if(this._module_id_maps.has(a.id)){for(var b=this._module_id_maps.get(a.id),c=$jscomp.makeIterator(b),e=c.next();!e.done;e=c.next()){var e=e.value,f=this._module_maps.get(e),k;for(k in f)if(f[k].id==a.id){arrs.slice(e);break}}b.clear()}};b.notify=function(a){this._module_maps.has(a.id)&&this._module_maps.get(a.id).forEach(function(b){b.notify(a)})};jees.Response=c})();this.jees=this.jees||{};(function(){function c(){}c.prototype.send=function(b,a){jees.SM.get(a).send(JSON.stringify(b))};jees.Request=c})();this.jees=this.jees||{};(function(){function c(){throw"SessionData cannot be instantiated.";}c._storage=sessionStorage;c.set=function(b,a){if("object"==typeof a){a=JSON.stringify(a);var d=this._storage.getItem("object_keys"),c=b+",";d&&-1!=d.indexOf(c)||this._storage.setItem("object_keys",(d||"")+c)}this._storage.setItem(b,a)};c.get=function(b){var a=this._storage.getItem(b),d=this._storage.getItem("object_keys");return d&&-1!=d.indexOf(b+",")?JSON.parse(a):a};c.delete=function(b){var a=this._storage.getItem("object_keys"),d=b+",";a&&-1!=a.indexOf(d)&&(a.replace(d,""),this._storage.setItem(this._storage.setItem("object_keys",a)));this._storage.removeItem(b)};c.clear=function(b){this._storage.clear()};jees.SD=c})();this.jees=this.jees||{};(function(){function c(){throw"LocalData cannot be instantiated.";}c._storage=localStorage;c.set=function(b,a){if("object"==typeof a){a=JSON.stringify(a);var d=this._storage.getItem("object_keys"),c=b+",";d&&-1!=d.indexOf(c)||this._storage.setItem("object_keys",(d||"")+c)}this._storage.setItem(b,a)};c.get=function(b){var a=this._storage.getItem(b),d=this._storage.getItem("object_keys");return d&&-1!=d.indexOf(b+",")?JSON.parse(a):a};c.delete=function(b){var a=this._storage.getItem("object_keys"),d=b+",";a&&-1!=a.indexOf(d)&&(a.replace(d,""),this._storage.setItem(this._storage.setItem("object_keys",a)));this._storage.removeItem(b)};c.clear=function(b){this._storage.clear()};jees.LD=c})();this.jees=this.jees||{};(function(){function c(a,b,c){this.host=a;this.port=b;this.path=c;this.status=0;this._connector=null}c.STATUS_DISCONNECT=1006;c.STATUS_SUCCESS=200;var b=c.prototype;b._handler_open=function(a){this.status=c.STATUS_SUCCESS};b._handler_close=function(a){this.status=a.code};b._handler_error=function(a){console.error(a)};b._handler_message=function(a){a=new jees.Message(a.data);jees.Response.notify(a)};b._get_connect_url=function(){return(this.host?this.host:"")+(this.port?":"+this.port:"")+(this.path?"/"+this.path:"")};b.connect=function(){if(this instanceof jees.WebSocketConnector){var a=this,b="ws://"+this._get_connect_url();this._connector=new WebSocket(b);this._connector.onopen=function(b){a._handler_open(b)};this._connector.onclose=function(b){a._handler_close(b)};this._connector.onerror=function(b){a._handler_error(b)};this._connector.onmessage=function(b){a._handler_message(b)}}};b.send=function(a){if(this.isConnecting())this._connector.send(a);else throw"\u5df2\u7ecf\u548c\u670d\u52a1\u5668\u65ad\u5f00\u8fde\u63a5\u3002";};b.isConnecting=function(){return this.status==c.STATUS_SUCCESS};jees.Connector=c})();this.jees=this.jees||{};(function(){function c(b,a,d){this.Connector_constructor(b,a,d)}createjs.extend(c,jees.Connector);jees.WebSocketConnector=createjs.promote(c,"Connector")})();this.jees=this.jees||{};(function(){function c(a){this.userId=this.id=0;this.intData=[];this.strData=[];this.booData=[];this.floData=[];this.dblData=[];this.lonData=[];this.bytData=[];this.type=1;if("string"==typeof a){a=eval("("+a+")");for(var b in this)a.hasOwnProperty(b)&&(this[b]=a[b])}}var b=c.prototype;b.addInteger=function(a){this.intData.push(a)};b.addString=function(a){this.strData.push(a)};b.addFloat=function(a){this.floData.push(a)};b.addBoolean=function(a){this.booData.push(a)};b.addDouble=function(a){this.dblData.push(a)};b.addLong=function(a){this.lonData.push(a)};b.addBytes=function(a){this.bytData.push(a)};b.getInteger=function(a){return a>=this.intData.length?0:this.intData[a]};b.getString=function(a){return a>=this.strData.length?null:this.strData[a]};b.getFloat=function(a){return a>=this.floData.length?0:this.floData[a]};b.getBoolean=function(a){return a>=this.booData.length?null:this.booData[a]};b.getDouble=function(a){return a>=this.booData.length?0:this.dblData[a]};b.getLong=function(a){return a>=this.lonData.length?0:this.lonData[a]};b.getBytes=function(a){return a>=this.bytData.length?null:this.bytData[a]};jees.Message=c})();this.jees=this.jees||{};(function(){function c(a){if(!a)throw"\u6a21\u5757\u5fc5\u987b\u8bbe\u7f6eID\u3002";this.id=a}var b=c.prototype;b.getId=function(){return this.id};b.enter=function(){};b.leave=function(){};b.update=function(a){};b.interrupt=function(){};b.recovery=function(){};b.notify=function(a){};jees.Module=c})();this.jees=this.jees||{};(function(){function c(){throw"UtilTools cannot be instantiated.";}c.Random=function(){function b(){a=(9301*a+49297)%233280;return a/233280}var a=(new Date).getTime();return function(a,c){return Math.ceil(b()*a)+(c?c:0)}}();c.RandomColor=function(){function b(){var a=jees.UT.Random(256);return 10>a?"0"+a:a.toString(16)}return function(){return"#"+b()+b()+b()}}();c.OppositeColor=function(){function b(a){a=255-a;64<a&&128>a?a-=64:128<=a&&192>a&&(a+=64);return 10>a?"0"+a:a.toString(16)}return function(a){var d=parseInt(a.substring(1,3),16),c=parseInt(a.substring(3,5),16);a=parseInt(a.substring(5),16);d=b(d);c=b(c);a=b(a);return"#"+d+c+a}}();c.Grid=function(){function b(a,b,c,e,f){1==b?(b=[f],f=[0]):2==b?0!=a.t?(b=[a.t,f-a.t],f=[0,a.t]):(b=[f-a.b,a.b],f=[0,f-a.b]):(b=[a.t,f-a.t-a.b,a.b],f=[0,a.t,f-a.b]);1==c?(c=[e],a=[0]):2==c?0!=a.l?(c=[a.l,e-a.l],a=[0,a.l]):(c=[e-a.r,a.r],a=[0,e-a.r]):(c=[a.l,e-a.l-a.r,a.r],a=[0,a.l,e-a.r]);return{x:a,y:f,w:c,h:b}}return function(a,d,c,e,f){var r=[],h=1,n=1;0!=a.l&&n++;0!=a.r&&n++;0!=a.t&&h++;0!=a.b&&h++;d=b(a,h,n,d,c);a=b(a,h,n,e,f);for(e=0;e<h;e++)for(f=0;f<n;f++)c={x:d.x[f],y:d.y[e],w:d.w[f],h:d.h[e],dx:a.x[f],dy:a.y[e],dw:a.w[f],dh:a.h[e],sw:a.w[f]/d.w[f],sh:a.h[e]/d.h[e]},"string"==typeof c.x&&(c.x=parseInt(c.x)),"string"==typeof c.y&&(c.y=parseInt(c.y)),"string"==typeof c.w&&(c.w=parseInt(c.w)),"string"==typeof c.h&&(c.h=parseInt(c.h)),"string"==typeof c.dx&&(c.dx=parseInt(c.dx)),"string"==typeof c.dy&&(c.dy=parseInt(c.dy)),"string"==typeof c.dw&&(c.dw=parseInt(c.dw)),"string"==typeof c.dh&&(c.dh=parseInt(c.dh)),"string"==typeof c.sw&&(c.sw=parseFloat(c.sw)),"string"==typeof c.sh&&(c.sh=parseFloat(c.sh)),r.push(c);return r}}();jees.UT=c})();this.jees=this.jees||{};(function(){jees.TL_STRING=function(){throw"StringTools cannot be instantiated.";}})();this.jees=this.jees||{};(function(){function c(){throw"jees.CJS\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}c.startup=function(){};c.get=function(){return createjs};c.getTickerTime=function(){return this.getTicker().getMeasuredTickTime().toFixed(0)};c.getFPS=function(){return this.getTicker().getMeasuredFPS().toFixed(0)};c.getTouch=function(){return createjs.Touch};c.getTicker=function(){return createjs.Ticker};c.getSound=function(){return createjs.Sound};c.newContainer=function(){return new createjs.Container};c.newShape=function(b,a,d){var c=new createjs.Shape,e=c.graphics;d&&e.beginFill(d);b&&a&&e.drawRect(0,0,b,a);(d||b&&a)&&e.endFill();return c};c.newObject=function(){return new createjs.DisplayObject};c.newBox=function(b,a,d){var c=new createjs.Shape;c.graphics.beginStroke(d).drawRect(0,0,b,a);return c};c.newBitmap=function(b){return new createjs.Bitmap(b)};c.newRect=function(b,a,d,c){return new createjs.Rectangle(b,a,d,c)};c.newText=function(b,a,d){return new createjs.Text(b,a,d)};jees.CJS=c})();this.jees=this.jees||{};(function(){function c(){throw"Device cannot be instantiated.";}c.width=0;c.height=0;c.startup=function(){this.width=window.innerWidth;this.height=window.innerHeight;if("stretch"==jees.SET.getDisplay()){var b=jees.DEV.width/jees.SET.getWidth(),a=jees.DEV.height/jees.SET.getHeight(),d=jees.APP.getCanvas();d.style.width=jees.SET.getWidth()*b+"px";d.style.height=jees.SET.getHeight()*a+"px"}};c.isPortrait=function(){return 0==window.orientation};jees.DEV=c})();this.jees=this.jees||{};(function(){function c(){throw"Debug cannot be instantiated.";}c._init=!1;c._width=200;c._height=100;c._wgt_text=null;c._wgt_panel=null;c._print="";c.print=function(b){this._print=b};c.startup=function(){jees.SET.isDebug()&&!this._init&&(this._init=!0,jees.CM._get_container(jees.CM.Container.DEBUG),this.panel=new jees.Panel,this.panel.setSize(this._width,this._height),this.panel.setColor("#8080C0"),this.panel.setBackAlpha(.5),this._wgt_text=new jees.TextBox,this._wgt_text.setColor("#FFFF00"),this._wgt_text.setMaxWidth(this._width),this._wgt_text.setLineWidth(this._height),this.panel.addWidget(this._wgt_text),jees.CM.addWidget(this.panel,!1,jees.CM.Container.DEBUG),jees.CM.update(jees.CM.Container.DEBUG))};c.update=function(){if(jees.SET.isDebug()){var b=" \u5e27\u7387: "+jees.CJS.getFPS(!0)+"\n \u56de\u8c03\u65f6\u95f4\uff1a"+jees.CJS.getTickerTime()+"ms\n \u81ea\u5b9a\u8f93\u51fa\uff1a"+this._print;this._wgt_text.setText(b)}};jees.DEBUG=c})();this.jees=this.jees||{};(function(){function c(){throw"Event cannot be instantiated.";}c.RM={FL:"fileload",C:"complete"};c.Widget={C:"click",DC:"dblclick",MD:"mousedown",MO:"mounseout",MIn:"mouseover"};c.bind=function(b,a,d){return b.on(a,d)};c.unbind=function(b,a,d){b.off(a,d)};c.tick=function(b){return jees.E.bind(createjs.Ticker,"tick",b)};c.untick=function(b){jees.E.unbind(createjs.Ticker,"tick",b)};jees.E=c})();this.jees=this.jees||{};(function(){function c(){throw"jees.SET \u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}c.CONFIG_FILE="../assets/configs/jees.default.config";c.SKIN_FILE="../assets/images/skin_default.png";c.config=null;c.timestamp=0;c.fps=30;c.canvas=null;c.width=0;c.height=0;c.sound=!1;c.debug=!1;c.mouseover=!1;c.display="default";c.skin="default";c.viewportScale=1;c.connector={enable:!1,host:null,port:null,path:null};c.getCanvas=function(){return this.canvas};c.getWidth=function(){return this.width};c.getHeight=function(){return this.height};c.getFPS=function(){return this.fps};c.setFPS=function(b){this.fps=b};c.getTimestamp=function(){return this.timestamp};c.setTimestamp=function(b){this.timestamp=b};c.getConfig=function(){return this.config};c.getSkin=function(){return this.skin.toLowerCase()};c.getDisplay=function(){return this.display.toLowerCase()};c.getViewportScale=function(){return this.viewportScale};c.enableSound=function(){return this.sound};c.enableDebug=function(){return this.debug};c.enableMouseOver=function(){return this.mouseover};c.enableConnector=function(){return this.connector.enable};c.startup=function(b){this.config=b;b=this.config.Setting;for(var a in b)this.hasOwnProperty(a)&&(this[a]=b[a]);"auto"==b.width&&(this.width=document.documentElement.clientWidth||document.body.clientWidth);"auto"==b.height&&(this.height=document.documentElement.clientHeight||document.body.clientHeight);b=this.config.Connector;for(a in b)this.connector.hasOwnProperty(a)&&(this.connector[a]=b[a])};jees.SET=c})();this.jees=this.jees||{};(function(){function c(){throw"jees.MM\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}c._ids=[];c._modules=new Map;c._module=null;c.enter=function(b){if(void 0==b||!b instanceof jees.Module)throw"\u52a0\u5165\u6a21\u5757\u5bf9\u8c61\u9519\u8bef";if(this._modules.has(b.getId()))throw"\u6dfb\u52a0\u4e86\u91cd\u590d\u7684\u6a21\u5757["+b.getId()+"]";null!=this._module&&this._module.interrupt();this._ids.push(b.getId());this._modules.set(b.getId(),b);this._module=b;b.enter()};c.leave=function(){if(null!=this._module&&0!=this._ids.length){var b=this._ids.pop();this._module.leave();this._modules.delete(b);0!=this._modules.size&&(this._module=this._modules.get(this._ids[this._ids.length-1]),this._module.recovery())}};c.clear=function(){for(;0<this._modules.length;)this.leave()};c.update=function(b){this._modules.forEach(function(a){a.update(b)})};c.current=function(){return this._module};jees.MM=c})();this.jees=this.jees||{};(function(){function c(){throw"jees.RM\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}c._queue=null;c._loader=null;c._resources=null;c._callback=null;c._handler=null;c.DEFAULT_GROUP="default";c.startup=function(){this._loader=[];this._resources=new Map;this._resources.set(this.DEFAULT_GROUP,new Map);this._queue=new createjs.LoadQueue(!1,"","Anonymous");this._queue.maintainScriptOrder=!0};c.reload=function(){jees.SET.enableSound()&&this._queue.installPlugin(createjs.Sound)};c.getProgress=function(){return this._queue.progress};c.add=function(b,a,d){var c;void 0==d?c=this._resources.get(this.DEFAULT_GROUP):this._resources.has(d)?c=this._resources.get(d):(c=new Map,this._resources.set(d,c));c.has(b)||this._loader.push({id:b,src:a,group:d})};c.onload=function(b){if(null!=this._callback)throw"\u4e0a\u6b21\u52a0\u8f7d\u5c1a\u672a\u7ed3\u675f\u3002";if(null==this._callback&&"function"===typeof b){this._callback=b;var a=this;this._handler=jees.E.bind(this._queue,"complete",function(b){a._complete_handler(b)})}0!=this._loader.length?this._queue.loadManifest(this._loader):this._complete_handler()};c.get=function(b,a){var d;d=void 0!=a?this._resources.get(a):this._resources.get(this.DEFAULT_GROUP);if(d.has(b))return d.get(b);throw"\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u8d44\u6e90\uff1aRES\x3d["+b+", GROUP\x3d["+a+"]";};c.del=function(b,a){a=void 0!=a?this._resources.get(a):this._resources.get(this.DEFAULT_GROUP);a.has(b)?a.delete(b):this._queue.remove(b)};c._complete_handler=function(b){null!=this._handler&&jees.E.unbind(this._queue,"complete",this._handler);this._loader.forEach(function(a){var b=jees.RM._queue.getResult(a.id);jees.RM._resources.get(a.group).set(a.id,b)});this._loader=[];this._callback(b);this._callback=null};jees.RM=c})();this.jees=this.jees||{};(function(){function c(){throw"CanvasManager cannot be instantiated.";}c.Container={BACK:-2,BOTTOM:-1,DEFAULT:0,TOP:1,POPUP:2,SYSTEM:3,DEBUG:4,CONSOLE:5};c._caches=null;c._containers=null;c.__update_cache_level=function(b){if(this._caches.has(b)){var a=this._caches.get(b);0<a.length&&(a=a.pop(),a.initialize(),this._containers.get(b).addChild(a))}};c._update_cache=function(){this.__update_cache_level(c.Container.DEFAULT)};c.startup=function(){this._caches=new Map;this._containers=new Map};c.update=function(b){this._update_cache()};c.addChild=function(b,a){a=a||c.Container.DEFAULT;if(this._caches.has(a)){var d=this._caches.get(a);d.push(b)}else d=[],d.push(b),this._caches.set(a,d),b=new jees.CJS.newContainer,this._containers.set(a,b),jees.APP.addChild(b);this._update_cache()};c.removeChild=function(b,a){this._containers.get(a||c.Container.DEFAULT).removeChild(b)};jees.CM=c})();this.jees=this.jees||{};(function(){function c(a,b){this._group=void 0==a?jees.RM.DEFAULT_GROUP:a;this._suffix=void 0==b?"":b}var b=c.prototype;b.register=function(a,b){var c=!1;0<this._suffix.length?-1!=b.lastIndexOf("."+this._suffix)&&(c=!0):c=!0;if(c)jees.RM.add(a,b,this._group);else throw"\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e";};b.onload=function(a){jees.RM.onload(a)};b.get=function(a){return null!=this._group?jees.RM.get(a,this._group):jees.RM.get(a)};b.del=function(a){null!=this._group?jees.RM.del(a,this._group):jees.RM.del(a)};b.getContent=function(a){return JSON.parse(this.get(a))};jees.FileLoadManager=c})();this.jees=this.jees||{};(function(){function c(){throw"jees.SM\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}c._connectors=[];c.startup=function(b){};c.register=function(b){if(!b instanceof jees.Connector)throw"\u8fde\u63a5\u5bf9\u8c61\u5fc5\u987b\u4e3ajees.Connector\u6216\u8005\u5176\u5b50\u7c7b\u3002";this._connectors.push(b);b.connect()};c.get=function(b){return void 0!=b?_connectors[b]:this._connectors[0]};jees.SM=c})();this.jees=this.jees||{};(function(){function c(){throw"jees.APP\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}c._canvas=null;c._stage=null;c._module=null;c._inited=!1;c._handler=null;c._loader=[];c.startup=function(b){var a=this;a._module=b;jees.RM.startup();jees.Skins.register("default",jees.SET.SKIN_FILE);jees.Config.register("config",jees.SET.CONFIG_FILE);this.addLoader(function(){jees.Config.onload(function(){a._initialize()})});this._handler=jees.E.tick(function(b){a.update(b)})};c.update=function(b){0<this._loader.length&&this._loader.pop().call();if(this._inited&&(null!=this._module&&(jees.MM.enter(this._module),this._module=null),!b.paused)){b=jees.CJS.getTicker().getTime();var a=b-jees.SET.getTimestamp();jees.SET.setTimestamp(b);jees.MM.update(a);jees.CM.update();this._stage.update()}};c.addChild=function(b){this._stage.addChild(b)};c.removeChild=function(b){this._stage.removeChild(b)};c.addLoader=function(b){this._loader.push(b)};c.getConfig=function(){return this._config};c.getTimestamp=function(){};c.getCanvas=function(){return this._canvas};c.getConnector=function(){return this._connector};c.getScreenSize=function(){return{w:this._canvas.width,h:this._canvas.height}};c.setFPS=function(b){jees.SET.setFPS(b);jees.CJS.getTicker().framerate=jees.SET.getFPS()};c.screenOrientation=function(){jees.DEV.isPortrait()?(jees.APP._stage.x=self.canvasHeight,jees.APP._stage.rotation=90):(jees.APP._stage.x=0,jees.APP._stage.rotation=0)};c.screenResize=function(){};c._initialize=function(){jees.SET.startup(jees.Config.getContent("config"));var b=1/window.devicePixelRatio;document.querySelector('meta[name\x3d"viewport"]').setAttribute("content","width\x3ddevice-width,initial-scale\x3d"+b+", maximum-scale\x3d"+b+", minimum-scale\x3d"+b+", user-scalable\x3dno");jees.SET.viewportScale=b;this._canvas=document.getElementById(jees.SET.getCanvas());this._stage=new createjs.StageGL(this._canvas);this._canvas.width=jees.SET.getWidth();this._canvas.height=jees.SET.getHeight();this._stage.updateViewport(jees.SET.getWidth(),jees.SET.getHeight());createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED;this.setFPS(jees.SET.getFPS());createjs.Touch.enable(this._stage);jees.SET.enableMouseOver()&&this._stage.enableMouseOver();jees.SET.enableConnector()&&(b=new jees.WebSocketConnector(jees.SET.connector.host,jees.SET.connector.port,jees.SET.connector.path),jees.SM.register(b));jees.DEV.startup();jees.RM.reload();jees.CM.startup();jees.Skins.startup();this._inited=!0};jees.APP=c})();this.jees=this.jees||{};this.jees.EX=this.jees.EX||{};(function(){function c(b,a){this.FileLoadManager_constructor(b,a)}createjs.extend(c,jees.FileLoadManager);jees.EX.ConfigManager=createjs.promote(c,"FileLoadManager")})();this.jees=this.jees||{};this.jees.EX=this.jees.EX||{};(function(){function c(a,b){this.FileLoadManager_constructor(a,b);this._layouts=new Map}var b=createjs.extend(c,jees.FileLoadManager);b._layout_property_2_widget=function(a,b){var c=this,d=null,f=a?a.toString().toLowerCase():"widget";if("widget"==f)d=new jees.UI.Widget;else if("panel"==f)d=new jees.UI.Panel;else if("textbox"==f)d=new jees.UI.TextBox;else if("imagebox"==f)d=new jees.UI.ImageBox;else if("imagespt"==f)d=new jees.UI.ImageSpt;else if("button"==f)d=new jees.UI.Button;else if("checkbox"==f)d=new jees.UI.CheckBox;else if("inputbox"==f)d=new jees.UI.InputBox;else throw"\u9519\u8bef\u7684\u63a7\u4ef6\u7c7b\u578b\uff1a"+a;for(var k in d)b.hasOwnProperty(k)&&(d[k]=b[k]);for(k in d.property)b.hasOwnProperty(k)&&(d.property[k]=b[k]);d.property.childs&&d.property.childs.forEach(function(a){for(var b in a){d.addChild(c._layout_property_2_widget(b,a[b]));break}});return d};b._layout_2_widget=function(a){var b=null,c;for(c in a){b=this._layout_property_2_widget(c,a[c]);break}return b};b.load=function(a){var b;this._layouts.has(a)?b=this._layouts.get(a):(b=this._layout_2_widget(this.getContent(a)),this._layouts.set(a,b));jees.CM.addChild(b);return b};b.unload=function(a){if(this._layouts.has(a)){var b=this._layouts.get(a);this._layouts.delete(a);this.del(a);jees.CM.removeChild(b)}};jees.EX.LayoutManager=createjs.promote(c,"FileLoadManager")})();this.jees=this.jees||{};this.jees.EX=this.jees.EX||{};(function(){function c(a,b){this.FileLoadManager_constructor(a,b);this._config=null;this._skin="default"}var b=createjs.extend(c,jees.FileLoadManager);b.startup=function(){this._config=jees.SET.getConfig().Skin;this._skin=jees.SET.getSkin()};b.getSkin=function(a,b){return{resource:this.get(void 0!=b?b:this._skin),property:this._config[a]}};jees.EX.SkinManager=createjs.promote(c,"FileLoadManager")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(a,b,c,e){this._type=a?a.toLowerCase():"none";this._skinResource=e?e:"default";this._config=jees.Skins.getSkin(this._type,this._skinResource);this._resource=this._config.resource;this._rects=new Map;this._regions=new Map;this._bitmaps=new Map;this._init_rects();this._init_regions(b,c);this._init_bitmap(b,c)}var b=c.prototype;b.getSkinType=function(){return this._type};b.getSkinResource=function(){return this._skinResource};b.getCacheDataURL=function(a){return a&&this._bitmaps.has(a)?this._bitmaps.get(a):this._bitmaps.has("rect")?this._bitmaps.get("rect"):null};b.__init_rect=function(a,b){b&&this._rects.set(a,b)};b._init_rects=function(){this.__init_rect("rect",this._config.property.rect);this.__init_rect("highlight",this._config.property.highlight);this.__init_rect("push",this._config.property.push);this.__init_rect("disable",this._config.property.disable);this.__init_rect("checked",this._config.property.checked);this.__init_rect("checkedHighlight",this._config.property.checkedHighlight);this.__init_rect("checkedPush",this._config.property.checkedPush);this.__init_rect("checkedDisable",this._config.property.checkedDisable)};b.__init_region=function(a,b,c,e){c=void 0!=c?c:b.w;e=void 0!=e?e:b.h;b&&this._regions.set(a,jees.UT.Grid(this._config.property.region,b.w,b.h,c,e))};b._init_regions=function(a,b){var c=this;this._rects.forEach(function(d,r){c.__init_region(r,d,a,b)})};b.__init_bitmap=function(a,b,c){if(a){var d=this._rects.get(a),r=this._regions.get(a),k=jees.CJS.newBitmap(this._resource);k.sourceRect=jees.CJS.newRect(d.x,d.y,d.w,d.h);var h=jees.CJS.newContainer(),n=d.x,t=d.y;r.forEach(function(a){var b=k.clone();b.sourceRect=jees.CJS.newRect(n+a.x,t+a.y,a.w,a.h);b.x=a.dx;b.y=a.dy;b.scaleX=a.sw;b.scaleY=a.sh;h.addChild(b)});h.cache(0,0,b,c);this._bitmaps.set(a,h.getCacheDataURL())}};b._init_bitmap=function(a,b){var c=this;this._rects.forEach(function(d,r){c.__init_bitmap(r,a,b)})};jees.UI.Skin=c})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.h=this.w=this.y=this.x=0;this.height=this.width="default";this.offsetY=this.offsetX=0;this.scaleY=this.scaleX=1;this.style=this.alignY=this.alignX=0;this.visibleMask=this.enableMask=!1;this.layoutY=this.layoutX=null;this.enableSkin=!0;this.resource=this.skinType=this.skinResource=null;this.resHeight=this.resWidth=-1;this.childs=this.rect=this.region=null;this.enableDrag=this.state=!1;this.dragY=this.dragX=!0;this._widget=null}var b=c.prototype;b.initialize=function(a){if(!a)throw"\u63a7\u4ef6\u4e0d\u80fd\u4e3a\u7a7a!";this._widget=a;this._resource_size();this.setSize();this.setAlign();if(this.enableDrag){var b=this;jees.E.bind(a,"mousedown",function(a){this.offset={x:this.x-a.stageX,y:this.y-a.stageY}});jees.E.bind(a,"pressmove",function(a){b.dragX&&(this.x=this.property.x=a.stageX+this.offset.x);b.dragY&&(this.y=this.property.y=a.stageY+this.offset.y)})}};b.getResourceSize=function(){return{w:this.resWidth,h:this.resHeight}};b.setResourceSize=function(a,b){void 0!=a&&(this.resWidth=a);void 0!=b&&(this.resHeight=b)};b.getSize=function(a){return a?{w:this.width,h:this.height}:{w:this.w,h:this.h}};b.setSize=function(a,b){void 0!=a&&(this.width=a);void 0!=b&&(this.height=b);a=this._get_parnet_size();this.w=this._calculate_size(this.width,this.resWidth,this.layoutX,this._widget.parent,a.w,!0);this.h=this._calculate_size(this.height,this.resHeight,this.layoutY,this._widget.parent,a.h,!1)};b.getPosition=function(){return{x:this.x,y:this.y}};b.setPosition=function(a,b){void 0!=a&&(this.offsetX=a);void 0!=b&&(this.offsetY=b);a=this._get_parnet_size();this.x=this._calculate_position(this.offsetX,this.alignX,a.w,this.w);this.y=this._calculate_position(this.offsetY,this.alignY,a.h,this.h)};b.getScale=function(){return{x:this.scaleX,y:this.scaleY}};b.setScale=function(a,b){a&&(this.scaleX=a);b&&(this.scaleY=b)};b.getAlign=function(){return{x:this.alignX,y:this.alignY}};b.setAlign=function(a,b){void 0!=a&&(this.alignX=a);void 0!=b&&(this.alignY=b);this._widget.regX=this._calculate_align(this.alignX,this.w);this._widget.regY=this._calculate_align(this.alignY,this.h);this._widget instanceof jees.UI.ImageBox&&(this._widget.regX=this._calculate_align(this.alignX,this.resWidth),this._widget.regY=this._calculate_align(this.alignY,this.resHeight));this.setPosition()};b._get_parnet_size=function(){var a=this._widget.parent;a?a instanceof jees.UI.Widget?a=a.getSize():a instanceof createjs.Container?(a=a.getBounds(),a={w:a.width,h:a.height}):a=a instanceof createjs.Stage||a instanceof createjs.StageGL?jees.APP.getScreenSize():a.getSize():a=jees.APP.getScreenSize();return a};b._calculate_size=function(a,b,c,e,f,k){if("string"==typeof a){if("default"==a)return-1!=b?b:f;if("auto"==a){var d=0;c&&c.split(",").forEach(function(a){a=e.getChildByName(a);a.property.state||a.initialize();d+=k?a.getSize().w:a.getSize().h});return f-d}return-1!=a.indexOf("%")?parseInt(a.substring(0,a.length-1))*f/100:parseInt(a)}return a};b._calculate_align=function(a,b){return 2==a?b:1==a?b/2:0};b._calculate_position=function(a,b,c,e){return 2==b?c-a:1==b?c/2+a:a};b._resource_size=function(){if(this.resource)if("string"==typeof this.resource)if(this.resource.startsWith("data:image")){var a=document.createElement("img");a.src=this.resource;this.resWidth=a.width;this.resHeight=a.height}else/\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(this.resource)||(a=jees.Resource.get(this.resource),this.resWidth=a.width,this.resHeight=a.height);else this.resource instanceof createjs.Bitmap&&(a=this.resource.getBounds(),this.resWidth=a.width,this.resHeight=a.height)};jees.UI.Property=c})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.Container_constructor();this.property=new jees.UI.Property;this.maskColor="#000000";this.maskAlpha=.5}var b=createjs.extend(c,createjs.Container);b.initialize=function(){this.property.state||(this.property.state=!0,this.property.initialize(this),this._mask=jees.CJS.newShape(this.property.w,this.property.h,this.maskColor),this.property.visibleMask&&this.addChildAt(this._mask,0),this._reset_scale(),this._reset_position(),this._reset_mask(),this._init_childs(),this.cursor="pointer")};b.getAbsPosition=function(){var a=this.getConcatenatedMatrix();return{x:a.tx,y:a.ty}};b.setSize=function(a,b){this.property.setSize(a,b);this.property.setPosition();this._reset_mask()};b.getSize=function(a){return this.property.getSize(a)};b.setPosition=function(a,b){this.property.setPosition(a,b);this._reset_position()};b.getPosition=function(){return this.property.getPosition()};b.setScale=function(a,b){this.property.setScale(a,b);this._reset_scale()};b.getScale=function(){return this.property.getScale()};b.getAlign=function(){return{x:this.property.alignX,y:this.property.alignY}};b.setAlign=function(a,b){this.property.setAlign(a,b);this._reset_position()};b.findChildByName=function(a){for(var b in this.children){var c=this.children[b];if(this.children[b].name==a||c.findChildByName&&(c=c.findChildByName(a)))return c}return null};b._reset_position=function(){var a=this.getPosition();this.x=a.x;this.y=a.y;this._reset_mask()};b._reset_scale=function(){var a=this.getScale();this.scaleX=a.x;this.scaleY=a.y};b._reset_mask=function(){if(this._mask&&this.property.enableMask){var a=this.getSize();this.getPosition();this.getAlign();this.property.visibleMask&&(this._mask.alpha=this.maskAlpha,this._mask.graphics.clear().beginFill(this.maskColor).drawRect(0,0,a.w,a.h),this._mask.cache(0,0,a.w,a.h))}};b._init_childs=function(){if(this.children)for(var a=0;a<this.children.length;a++){var b=this.children[a];(b instanceof jees.UI.Widget||b instanceof jees.UI.TextBox||b instanceof jees.UI.ImageBox||b instanceof jees.UI.ImageSpt||b instanceof jees.UI.InputBox)&&b.initialize();this.property.enableMask&&(b.mask=this._mask)}};jees.UI.Widget=createjs.promote(c,"Container")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.Widget_constructor();this.property.skinResource="default";this.property.skinType="Panel";this._background=this._skin=null}var b=createjs.extend(c,jees.UI.Widget);b.initialize=function(){this.property.state||(this.Widget_initialize(),this._background=new jees.UI.ImageBox,this._background.initialize(),(this.property.enableSkin||!this.property.enableSkin&&this.property.resource)&&this.addChildAt(this._background,this.visibeMask?1:0),this._reset_background())};b.setSkinType=function(a){this.property.skinType=a;this._reset_background()};b._reset_size=function(){this.Widget__reset_size();this._reset_background()};b._reset_background=function(){this.property.enableSkin?this._reset_skin():this.property.resource&&this._reset_custom()};b._reset_custom_grid=function(){var a=this.getSize(),b=jees.Resource.get(this.property.resource),c=b.width,e=b.height,f=this.property.region.split(","),c=jees.UT.Grid({l:f[0],r:f[1],t:f[2],b:f[3]},c,e,a.w,a.h),k=jees.CJS.newContainer(),h=jees.CJS.newBitmap(b);c.forEach(function(a){var b=h.clone();b.sourceRect=jees.CJS.newRect(a.x,a.y,a.w,a.h);b.x=a.dx;b.y=a.dy;b.scaleX=a.sw;b.scaleY=a.sh;b.cache(0,0,a.w,a.h);k.addChild(b)});k.cache(0,0,a.w,a.h);k.getBounds();this.property.resource=k.getCacheDataURL();this._background.setSize(a.w,a.h);this._reset_background_resource()};b._reset_custom=function(){var a=this.getSize();this._reset_background_resource();switch(this.property.style){case 1:var b=jees.Resource.get(this.property.resource);this._background.setScale(a.w/b.width,a.h/b.height);break;case 2:null==this.mask&&(this.mask=jees.CJS.newShape());this.addChildAt(this.mask,0);this.mask.graphics.beginBitmapFill(this._background.image).drawRect(0,0,a.w,a.h);this.mask.cache(0,0,a.w,a.h);break;case 3:this._reset_custom_grid();break;default:this._background.alignX=1,this._background.alignY=1,this._background.setPosition(0,0)}this._background.cache(0,0,a.w,a.h)};b._reset_skin=function(){var a=this.getSize();this._skin||(this._skin=new jees.UI.Skin(this.property.skinType,a.w,a.h,this.property.skinResource));if(this._skin.getSkinType()!=this.property.skinType||this._skin.getSkinResource()!=this.property.skinResource)this._skin=new jees.UI.Skin(this.property.skinType,a.w,a.h,this.property.skinResource);this.property.resource=this._skin.getCacheDataURL("rect");this._reset_background_resource()};b._reset_background_resource=function(){this._background.getResource()!=this.property.resource&&this._background.setResource(this.property.resource)};jees.UI.Panel=createjs.promote(c,"Widget")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.Bitmap_constructor();this.property=new jees.UI.Property}var b=createjs.extend(c,createjs.Bitmap);b.initialize=function(){this.property.state||(this.property.state=!0,this.property.initialize(this),this._reset_bitmap(),this._reset_position())};b.getResource=function(){return this.property.resource};b.setResource=function(a){this.property.resource=a;this._reset_bitmap()};b.getSize=function(a){return this.property.getSize(a)};b.setSize=function(a,b){this.property.setSize(a,b);this._reset_size();this._reset_position()};b.getPosition=function(){return this.property.getPosition()};b.setPosition=function(a,b){this.property.setPosition(a,b);this._reset_position()};b.getAbsPosition=function(){var a=this.getConcatenatedMatrix();return{x:a.tx,y:a.ty}};b.getScale=function(){return this.property.getScale()};b.setScale=function(a,b){this.property.setScale(a,b);var c=this.getSize(),d=c.w,c=c.h;void 0!=a&&(d*=a);void 0!=b&&(c*=b);this.setSize(d,c)};b.setVisible=function(a){this.visible=a};b.getAlign=function(){return{x:this.property.alignX,y:this.property.alignY}};b.setAlign=function(a,b){this.property.setAlign(a,b);this._reset_position()};b._cache=function(){var a=this.getBounds();this.cache(0,0,a.width,a.height)};b._reset_bitmap=function(){"string"==typeof this.property.resource?this.property.resource.startsWith("data:image")?(this.image=document.createElement("img"),this.image.src=this.property.resource):/\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(this.property.resource)?(this.image=document.createElement("img"),this.image.src=this.property.resource):this.image=jees.Resource.get(this.property.resource):this.image=this.property.resource;this._reset_rect();this._reset_size()};b._reset_size=function(){var a=this.property.getResourceSize(),b=this.getSize();-1!=a.w&&b.w!=a.w&&(this.property.scaleX=b.w/a.w);-1!=a.w&&b.h!=a.h&&(this.property.scaleY=b.h/a.h);this._reset_scale()};b._reset_position=function(){var a=this.getPosition();this.x=a.x;this.y=a.y};b._reset_rect=function(){if(this.property.rect){var a=this.property.rect.split(",");this.sourceRect=jees.CJS.newRect(a[0],a[1],a[2],a[3]);this.setBounds(a[0],a[1],a[2],a[3]);this._cache()}else this.image&&(this.setBounds(0,0,this.property.w,this.property.h),this._cache())};b._reset_scale=function(){var a=this.getScale();this.scaleX=a.x;this.scaleY=a.y};jees.UI.ImageBox=createjs.promote(c,"Bitmap")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.Sprite_constructor();this.property=new jees.UI.Property;this.cols=this.rows=1;this.start=0;this.speed=100;this.auto=!0;this._data=null;this._frame_count=1;this.spriteSheet=new createjs.SpriteSheet(this._data)}var b=createjs.extend(c,createjs.Sprite);b.initialize=function(){if(!this.property.state){this.property.state=!0;var a=jees.Resource.get(this.property.resource),b=a.width/this.cols,c=a.height/this.rows;this.property.width=b;this.property.height=c;this.property.initialize(this);this._frame_count=this.cols*this.rows;this._data={images:[a],framerate:this._frame_count,frames:{width:b,height:c,count:this._frame_count},animations:{default:[0,this._frame_count-1,"default",1]}};this.spriteSheet._parseData(this._data);this._reset_speed();this._reset_position();this._goto(this.start);this.auto&&this.gotoAndPlay("default")}};b.getSize=function(a){return this.property.getSize(a)};b.setSize=function(a,b){this.property.setSize(a,b);this._reset_size();this._reset_position()};b.getPosition=function(){return this.property.getPosition()};b.setPosition=function(a,b){this.property.setPosition(a,b);this._reset_position()};b.getAbsPosition=function(){var a=this.getConcatenatedMatrix();return{x:a.tx,y:a.ty}};b.getScale=function(){return this.property.getScale()};b.setScale=function(a,b){this.property.setScale(a,b);var c=this.property.getResourceSize(),d=c.w,c=c.h;void 0!=a&&(d*=a);void 0!=b&&(c*=b);this.setSize(d,c)};b.setSpeed=function(a){this.speed=a;this._reset_speed()};b.getAlign=function(){return{x:this.property.alignX,y:this.property.alignY}};b.setAlign=function(a,b){this.property.setAlign(a,b);this._reset_position()};b.setVisible=function(a){this.visible=a};b._reset_size=function(){var a=this.property.getResourceSize(),b=this.getSize();-1!=a.w&&b.w!=a.w&&(this.property.scaleX=b.w/a.w);-1!=a.w&&b.h!=a.h&&(this.property.scaleY=b.h/a.h);this._reset_scale()};b._reset_position=function(){var a=this.getPosition();this.x=a.x;this.y=a.y};b._reset_scale=function(){var a=this.getScale();this.scaleX=a.x;this.scaleY=a.y};b._reset_speed=function(){var a=1E3/jees.SET.getFPS()/this.speed;this._data.animations.default[3]=a;this.spriteSheet._parseData(this._data)};jees.UI.ImageSpt=createjs.promote(c,"Sprite")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.Text_constructor("","","");this.property=new jees.UI.Property;this.bold=this.italic=!1;this.fontStyle="Arial";this.fontSize=12;this.warp=!0;this._drawText=this._reset_text;this._lineCount=1}var b=createjs.extend(c,createjs.Text);b.initialize=function(){this.property.state||(this.property.state=!0,this.font=this._get_font(),this._cache(),this.property.setResourceSize(this.getSize().w,this.getSize().h),this.property.initialize(this),this._cache(),this._reset_scale(),this._reset_position())};b.getSize=function(){return{w:this.lineWidth?this.lineWidth:this.getMeasuredWidth(),h:(this.lineHeight?this.lineHeight:this.getMeasuredLineHeight())*this._lineCount}};b.getPosition=function(){return this.property.getPosition()};b.setPosition=function(a,b){this.property.setPosition(a,b);this._reset_position()};b.getAbsPosition=function(){var a=this.getConcatenatedMatrix();return{x:a.tx,y:a.ty}};b.getColor=function(){return this.color};b.setColor=function(a){this.color=a;this._cache()};b.setFont=function(a,b,c,e){this._set_font(a,b,c,e);this.font=this._get_font();this._reset_size_position()};b.getFontStyle=function(){return this.fontStyle};b.setFontStyle=function(a){this.fontStyle=a;this.font=this._get_font();this._reset_size();this._reset_position()};b.getFontSize=function(){return this.fontSize};b.setFontSize=function(a){this.lineHeight=this.fontSize=a;this.font=this._get_font();this._reset_size();this._reset_position()};b.getAlign=function(){return{x:this.property.alignX,y:this.property.alignY}};b.setAlign=function(a,b){this.property.setAlign(a,b);this._reset_position()};b.getMaxWidth=function(){return this.maxWidth};b.setMaxWidth=function(a){this.maxWidth=a;this._reset_size();this._reset_position()};b.getLineWidth=function(){return this.lineWidth};b.setLineWidth=function(a){this.lineWidth=a;this._reset_size();this._reset_position()};b.getText=function(){return this.text};b.setText=function(a){this.text=a;this._reset_size();this._reset_position()};b.isBold=function(){return this.bold};b.setBold=function(a){this.bold=a;this.font=this._get_font();this._reset_size();this._reset_position()};b.isItalic=function(){return this.italic};b.setItalic=function(a){this.italic=a;this.font=this._get_font();this._reset_size();this._reset_position()};b.setVisible=function(a){this.visible=a};b.isVisible=function(){return this.visible};b.setScale=function(a,b){this.property.setScale(a,b);this._reset_scale()};b.getScale=function(){return this.property.getScale()};b.isWarp=function(){return this.warp};b.setWarp=function(a){this.warp=a;this.setText(this.text)};b._cache=function(){var a=this.getSize();this.cache(0,0,a.w,a.h)};b._reset_scale=function(){var a=this.getScale();this.scaleX=a.x;this.scaleY=a.y};b._get_font=function(){return(this.italic?"italic":"")+(this.bold?" bold":"")+" "+this.fontSize+"px "+this.fontStyle};b._set_font=function(a,b,c,e){this.fontSize=a;this.fontStyle=b?b:"Arial";this.italic=c||this.italic;this.bold=e||this.bold};b._reset_size=function(){this._cache();this.property.setResourceSize(this.getSize().w,this.getSize().h);this.property.setSize();this.property.setAlign();this._cache()};b._reset_position=function(){var a=this.getPosition();this.x=a.x;this.y=a.y};b._reset_text=function(a,b,c){var d=!!a;d||(a=createjs.Text._workingContext,a.save(),this._prepContext(a));var f=this.lineHeight||this.getMeasuredLineHeight(),r=0,h=0;if(this.warp){for(var n=String(this.text).split(/(?:\r\n|\r|\n)/),t=0,g=n.length;t<g;t++){var l=n[t],m=null;if(null!=this.lineWidth&&(m=a.measureText(l).width)>this.lineWidth){for(var l=l.split(/(\s|[\u4e00-\u9fa5]+)/),m=[],p=0;p<l.length;p++){var q=l[p];""!=q&&(/([\u4e00-\u9fa5]+)/.test(q)?m=m.concat(q.split("")):m.push(q))}l=m;p="";for(q=0;q<l.length;q++)m=a.measureText(p+l[q]).width,console.log("---",m,this.lineWidth),m>=this.lineWidth?(m==this.lineWidth&&"s"!=l[q]&&(p+=l[q]),d&&this._drawTextLine(a,p,h*f),c&&c.push(p),p="",h++):"s"!=l[q]&&(p+=l[q]);""!=p&&(d&&this._drawTextLine(a,p,h*f),c&&c.push(p),h++)}else d&&this._drawTextLine(a,l,h*f),c&&lines.push(l),b&&null==m&&(m=a.measureText(l).width),m>r&&(r=m),h++}this._lineCount=h;b&&(b.width=r,b.height=h*f);d||a.restore();return b}d&&this._drawTextLine(a,this.text,h*f);c&&c.push(this.text)};jees.UI.TextBox=createjs.promote(c,"Text")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.ImageSpt_constructor();this.property.skinResource="Button";this.text="";this.types="normal, highlight, push, disable";this.bold=this.italic=this.disable=!1;this.fontStyle="Arial";this.fontSize=12;this.color="#FFFFFF";this.spriteY=this.spriteX=0;this.checked=!1;this.textY=this.textX=0;this._text=new jees.UI.TextBox}var b=createjs.extend(c,jees.UI.ImageSpt);b.initialize=function(){if(!this.property.state){this.property.state=!0;this.property.initialize(this);this._init_background();this._init_text();var a=this;-1!=this.types.indexOf("push")&&(jees.E.bind(this,"mousedown",function(b){a._handle_mousedown(b,a)}),jees.E.bind(this,"pressup",function(b){a._handle_pressup(b,a)}));-1!=this.types.indexOf("highlight")&&(jees.E.bind(this,"mouseover",function(b){a._handle_mouseover(b,a)}),jees.E.bind(this,"mouseout",function(b){a._handle_mouseout(b,a)}));this._reset_disable();this._reset_position()}};b.setDisabled=function(a){this.disable=a;this._reset_disable()};b.isDisabled=function(){return this.disable};b.setText=function(a){this._text.setText(a)};b.getText=function(){return this._text.text};b.setVisible=function(a){this.visible=a;this._text.setVisible(this.visible)};b._init_skin=function(){var a=this.getSize();this._skin=new jees.UI.Skin(this.property.skinResource,a.w,a.h,jees.SET.getSkin());this._data.images.push(this._skin.getCacheDataURL("rect"));this._data.images.push(this._skin.getCacheDataURL("highlight"));this._data.images.push(this._skin.getCacheDataURL("push"));this._data.images.push(this._skin.getCacheDataURL("disable"));this._data.animations.normal=[0,0,"normal"];this._data.animations.highlight=[1,1,"highlight"];this._data.animations.push=[2,2,"push"];this._data.animations.disable=[3,3,"disable"];this._data.frames.count=4};b._init_custom=function(){var a=jees.CJS.newBitmap(jees.Resource.get(this.property.resource)),b=a.getBounds(),c=this.types.split(","),e=c.length,f=this.getSize(),k=0==this.spriteX?f.w:this.spriteX,h=0==this.spriteY?f.h:this.spriteY,n=0==this.spriteX?b.width:this.spriteX,t=0==this.spriteY?b.height:this.spriteY;this.cols=b.width/n;this.rows=b.height/t;b=null;this.property.region&&(b=this.property.region.split(","),b=jees.UT.Grid({l:b[0],r:b[1],t:b[2],b:b[3]},n,t,k,h));for(var g=0;g<e;g++){var l=a.clone(),m=this.spriteX*g,p=this.spriteY*g;l.sourceRect=jees.CJS.newRect(m,p,n,t);l.cache(0,0,n,t);if(b){var q=jees.CJS.newContainer();b.forEach(function(a){var b=l.clone();b.sourceRect=jees.CJS.newRect(m+a.x,p+a.y,a.w,a.h);b.x=a.dx;b.y=a.dy;b.scaleX=a.sw;b.scaleY=a.sh;q.addChild(b)});q.cache(0,0,f.w,f.h);this._data.images.push(q.getCacheDataURL())}else this._data.images.push(l.getCacheDataURL());"normal"==c[g].toLowerCase().trim()&&(this._data.animations.normal=[g,g,"normal"]);"highlight"==c[g].toLowerCase().trim()&&(this._data.animations.highlight=[g,g,"highlight"]);"push"==c[g].toLowerCase().trim()&&(this._data.animations.push=[g,g,"push"]);"disable"==c[g].toLowerCase().trim()&&(this._data.animations.disable=[g,g,"disable"]);"checked"==c[g].toLowerCase().trim()&&(this._data.animations.checked=[g,g,"checked"]);"checkedHighlight"==c[g].toLowerCase().trim()&&(this._data.animations.checkedHighlight=[g,g,"checkedHighlight"]);"checkedPush"==c[g].toLowerCase().trim()&&(this._data.animations.checkedPush=[g,g,"checkedPush"]);"checkedDisable"==c[g].toLowerCase().trim()&&(this._data.animations.checkedDisable=[g,g,"checkedDisable"])}this._data.frames.count=e;b?(this._data.frames.width=k,this._data.frames.height=h):(this._data.frames.width=n,this._data.frames.height=t)};b._init_background=function(){var a=this.getSize();this._data={images:[],frames:{width:a.w,height:a.h,count:1},animations:{normal:[0,0,"normal"]}};this.property.resource&&""!=this.property.resource?this._init_custom():this._init_skin();this.spriteSheet=new createjs.SpriteSheet(this._data);this.gotoAndPlay("normal")};b._init_text=function(){var a=this.parent,b=this._text;a.addChildAt(b,a.getChildIndex(this)+1);b.text=this.text;b.fontSize=this.fontSize;b.fontStyle=this.fontStyle;b.color=this.color;b.italic=this.italic;b.bold=this.bold;b.mouseEnabled=!1;b.regX=b.getSize().w/2;b.regY=b.getSize().h/2;b.initialize()};b._reset_disable=function(){this.disable?this.gotoAndPlay(this.checked?"checkedDisable":"disable"):this.gotoAndPlay(this.checked?"checked":"normal")};b._handle_mousedown=function(a,b){b.isDisabled()||(b.gotoAndPlay(b.checked?"checkedPush":"push"),a=this._text.getSize(),this._text.property.offsetY+=a.h/4,this._text.setPosition())};b._handle_pressup=function(a,b){b.isDisabled()||(b.gotoAndPlay(b.checked?"checked":"normal"),a=this._text.getSize(),this._text.property.offsetY-=a.h/4,this._text.setPosition())};b._handle_mouseover=function(a,b){b.isDisabled()||b.gotoAndPlay(b.checked?"checkedHighlight":"highlight")};b._handle_mouseout=function(a,b){b.isDisabled()||b.gotoAndPlay(b.checked?"checked":"normal")};b._reset_size=function(){if(!this.property.region){var a=this.property.getResourceSize(),b=a.w/this.cols,a=a.h/this.rows,c=this.getSize();-1!=b&&c.w!=b&&(this.property.scaleX=c.w/b);-1!=a&&c.h!=a&&(this.property.scaleY=c.h/a);this._reset_scale()}};b._reset_position=function(){this.ImageSpt__reset_position();var a=this._text;if(a){var b=a.getSize(),c=this.getSize(),e=this.getAlign();a.property.alignX=e.x;a.property.alignY=e.y;0==e.x?(a.property.offsetX=this.property.offsetX+(c.w-b.w)/2,a.property.offsetX+=this.textX):1==e.x?(a.property.offsetX=this.property.offsetX,a.property.offsetX+=this.textX):2==e.x&&(a.property.offsetX=this.property.offsetX+(c.w-b.w)/2,a.property.offsetX-=this.textX);0==e.y?(a.property.offsetY=this.property.offsetY+(c.h-b.h)/2,a.property.offsetY+=this.textY):1==e.y?(a.property.offsetY=this.property.offsetY,a.property.offsetY+=this.textY):2==e.y&&(a.property.offsetY=this.property.offsetY+(c.h-b.h)/2,a.property.offsetY-=this.textY);a.setAlign();a.setPosition()}};jees.UI.Button=createjs.promote(c,"ImageSpt")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.Button_constructor();this.property.skinResource="CheckBox";this.group="";this.types="normal, highlight, push, disable, checked, checkedHighlight, checkedPush, checkedDisable";this._text=new jees.UI.TextBox}var b=createjs.extend(c,jees.UI.Button);b.initialize=function(){if(!this.property.state){this.Button_initialize();var a=this;jees.E.bind(this,"click",function(b){a._handle_click(b,a)});this._reset_checked()}};b.setChecked=function(a){this.checked=a;this._reset_checked()};b.isChecked=function(){return this.checked};b._init_skin=function(){var a=this.getSize();this._skin=new jees.UI.Skin(this.property.skinResource,a.w,a.h,jees.SET.getSkin());this._data.images.push(this._skin.getCacheDataURL("rect"));this._data.images.push(this._skin.getCacheDataURL("highlight"));this._data.images.push(this._skin.getCacheDataURL("push"));this._data.images.push(this._skin.getCacheDataURL("disable"));this._data.images.push(this._skin.getCacheDataURL("checked"));this._data.images.push(this._skin.getCacheDataURL("checkedHighlight"));this._data.images.push(this._skin.getCacheDataURL("checkedPush"));this._data.images.push(this._skin.getCacheDataURL("checkedDisable"));this._data.animations.normal=[0,0,"normal"];this._data.animations.highlight=[1,1,"highlight"];this._data.animations.push=[2,2,"push"];this._data.animations.disable=[3,3,"disable"];this._data.animations.checked=[4,4,"checked"];this._data.animations.checkedHighlight=[5,5,"checkedHighlight"];this._data.animations.checkedPush=[6,6,"checkedPush"];this._data.animations.checkedDisable=[7,7,"checkedDisable"];this._data.frames.count=8};b._handle_click=function(a,b){b.isDisabled()||b.setChecked(!b.checked)};b._reset_checked=function(){this.isDisabled()||(-1!=this.types.toLowerCase().indexOf("checked")?this.gotoAndPlay(this.checked?"checked":"normal"):this.gotoAndPlay("normal"))};jees.UI.CheckBox=createjs.promote(c,"Button")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function c(){this.Button_constructor();this.property=new jees.UI.Property;this.property.skinResource="InputBox";this.placeholder="";this.password=!1;this.paddingY=this.paddingX=0;this.warp=!1;var a=document.body,b=document.createElement("INPUT");a.appendChild(b);this._domElement=new createjs.DOMElement(b);this._input=this._domElement.htmlElement}var b=createjs.extend(c,jees.UI.Button);b.initialize=function(){if(!this.property.state&&(this.Button_initialize(),-1!=this.types.indexOf("push")&&(jees.E.unbind(this,"mousedown"),jees.E.unbind(this,"pressup")),this._init_input(),this.property.enableMask)){this._input.hidden=!0;var a=this;jees.E.bind(this,"click",function(b){a._input.hidden=!1;a._input.focus()});this._input.style.setProperty("hidden","true");this._input.onfocus=function(b){a._input.hidden=!1;a._text.setVisible(!1)};this._input.onblur=function(b){a._input.hidden=!0;a._text.setVisible(!0);a._reset_text()};this._input.onchange=function(b){a._input.hidden=!0}}};b.setText=function(a){this._input.value=a;this._reset_text()};b.getText=function(){return this._input.value};b._init_text=function(){if(this.property.enableMask){var a=this.parent,b=this._text;a.addChildAt(b,a.getChildIndex(this)+1);b.text=this.placeholder;b.fontSize=this.fontSize;b.fontStyle=this.fontStyle;b.color=this.color;b.italic=this.italic;b.bold=this.bold;b.mouseEnabled=!1;b.lineWidth=this.getSize().w-2*this.paddingX;b.warp=this.warp;b.initialize()}};b._init_input=function(){jees.APP.addChild(this._domElement);this._reset_input()};b._reset_position=function(){this.ImageSpt__reset_position();if(this.property.enableMask){this._reset_input();var a=this._text;if(void 0!=a){var b=this.getSize(),c=this.getAlign();0==c.x?a.property.offsetX=this.paddingX:1==c.x?a.property.offsetX=this.paddingX-b.w/2:2==c.x&&(a.property.offsetX=this.paddingX-b.w);0==c.y?a.property.offsetY=this.paddingY:1==c.y?a.property.offsetY=this.paddingY-b.h/2:2==c.y&&(a.property.offsetY=this.paddingY-b.h);a.x=this.x+a.property.offsetX;a.y=this.y+a.property.offsetY}}};b._reset_size=function(){};b._reset_input=function(){var a=this.getSize(),b=jees.DEV.width/jees.SET.getWidth(),c=jees.DEV.height/jees.SET.getHeight(),e=this.getAbsPosition(),f=a.w*b,a=a.h*c,b=e.x*b,c=e.y*c;this._input.type=this.password?"password":"text";this._input.placeholder=this.placeholder;e=this._input.style;e.setProperty("color",this.color);e.setProperty("width",f+"px");e.setProperty("height",a+"px");e.setProperty("left",b+"px");e.setProperty("top",c+"px");e.setProperty("padding",this.paddingX+"px "+this.paddingY+"px "+this.paddingX+"px "+this.paddingY+"px");e.setProperty("font-size",this.fontSize+"px")};b._reset_text=function(){this._text&&(this._text.setText(this.password?"********":""!=this._input.value?this._input.value:this.placeholder),this._text.x=this.x+this._text.property.offsetX,this._text.y=this.y+this._text.property.offsetY)};jees.UI.InputBox=createjs.promote(c,"Button")})();
//# sourceMappingURL=jees.min.js.map
