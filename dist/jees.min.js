var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};this.jees=this.jees||{};(function(){function a(c){if(!c)throw"\u6a21\u5757\u5fc5\u987b\u8bbe\u7f6eID\u3002";this.id=c}var b=a.prototype;b.getId=function(){return this.id};b.enter=function(){};b.leave=function(){};b.update=function(c){};b.interrupt=function(){};b.recovery=function(){};jees.Module=a})();this.jees=this.jees||{};(function(){function a(){throw"UtilTools cannot be instantiated.";}a.Random=function(){function b(){c=(9301*c+49297)%233280;return c/233280}var c=(new Date).getTime();return function(c,a){return Math.ceil(b()*c)+(a?a:0)}}();a.RandomColor=function(){function b(){var c=jees.UT.Random(256);return 10>c?"0"+c:c.toString(16)}return function(){return"#"+b()+b()+b()}}();a.OppositeColor=function(){function b(c){c=255-c;64<c&&128>c?c-=64:128<=c&&192>c&&(c+=64);return 10>c?"0"+c:c.toString(16)}return function(c){var a=parseInt(c.substring(1,3),16),d=parseInt(c.substring(3,5),16);c=parseInt(c.substring(5),16);a=b(a);d=b(d);c=b(c);return"#"+a+d+c}}();a.Grid=function(){function b(c,b,a,f,g){1==b?(b=[g],g=[0]):2==b?0!=c.t?(b=[c.t,g-c.t],g=[0,c.t]):(b=[g-c.b,c.b],g=[0,g-c.b]):(b=[c.t,g-c.t-c.b,c.b],g=[0,c.t,g-c.b]);1==a?(a=[f],c=[0]):2==a?0!=c.l?(a=[c.l,f-c.l],c=[0,c.l]):(a=[f-c.r,c.r],c=[0,f-c.r]):(a=[c.l,f-c.l-c.r,c.r],c=[0,c.l,f-c.r]);return{x:c,y:g,w:a,h:b}}return function(c,a,d,f,g){var e=[],m=1,p=1;0!=c.l&&p++;0!=c.r&&p++;0!=c.t&&m++;0!=c.b&&m++;a=b(c,m,p,a,d);c=b(c,m,p,f,g);for(f=0;f<m;f++)for(g=0;g<p;g++)e.push({x:a.x[g],y:a.y[f],w:a.w[g],h:a.h[f],dx:c.x[g],dy:c.y[f],dw:c.w[g],dh:c.h[f],sw:c.w[g]/a.w[g],sh:c.h[f]/a.h[f]});return e}}();jees.UT=a})();this.jees=this.jees||{};(function(){jees.TL_STRING=function(){throw"StringTools cannot be instantiated.";}})();this.jees=this.jees||{};(function(){function a(){throw"jees.CJS\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}a.startup=function(){};a.get=function(){return createjs};a.getTickerTime=function(){return this.getTicker().getMeasuredTickTime().toFixed(0)};a.getFPS=function(){return this.getTicker().getMeasuredFPS().toFixed(0)};a.getTouch=function(){return createjs.Touch};a.getTicker=function(){return createjs.Ticker};a.getSound=function(){return createjs.Sound};a.newContainer=function(){return new createjs.Container};a.newShape=function(b,c,a){var e=new createjs.Shape,f=e.graphics;a&&f.beginFill(a);b&&c&&f.drawRect(0,0,b,c);(a||b&&c)&&f.endFill();return e};a.newObject=function(){return new createjs.DisplayObject};a.newBox=function(a,c,e){var b=new createjs.Shape;b.graphics.beginStroke(e).drawRect(0,0,a,c);return b};a.newBitmap=function(a){return new createjs.Bitmap(a)};a.newRect=function(a,c,e,d){return new createjs.Rectangle(a,c,e,d)};a.newText=function(a,c,e){return new createjs.Text(a,c,e)};jees.CJS=a})();this.jees=this.jees||{};(function(){function a(){throw"Debug cannot be instantiated.";}a._init=!1;a._width=200;a._height=100;a._wgt_text=null;a._wgt_panel=null;a._print="";a.print=function(a){this._print=a};a.startup=function(){jees.SET.isDebug()&&!this._init&&(this._init=!0,jees.CM._get_container(jees.CM.Container.DEBUG),this.panel=new jees.Panel,this.panel.setSize(this._width,this._height),this.panel.setColor("#8080C0"),this.panel.setBackAlpha(.5),this._wgt_text=new jees.TextBox,this._wgt_text.setColor("#FFFF00"),this._wgt_text.setMaxWidth(this._width),this._wgt_text.setLineWidth(this._height),this.panel.addWidget(this._wgt_text),jees.CM.addWidget(this.panel,!1,jees.CM.Container.DEBUG),jees.CM.update(jees.CM.Container.DEBUG))};a.update=function(){if(jees.SET.isDebug()){var a=" \u5e27\u7387: "+jees.CJS.getFPS(!0)+"\n \u56de\u8c03\u65f6\u95f4\uff1a"+jees.CJS.getTickerTime()+"ms\n \u81ea\u5b9a\u8f93\u51fa\uff1a"+this._print;this._wgt_text.setText(a)}};jees.DEBUG=a})();this.jees=this.jees||{};(function(){function a(){throw"Event cannot be instantiated.";}a.RM={FL:"fileload",C:"complete"};a.Widget={C:"click",DC:"dblclick",MD:"mousedown",MO:"mounseout",MIn:"mouseover"};a.bind=function(a,c,e){return a.addEventListener(c,e)};a.unbind=function(a,c,e){a.removeEventListener(c,e)};a.tick=function(a){return jees.E.bind(createjs.Ticker,"tick",a)};a.untick=function(a){jees.E.unbind(createjs.Ticker,"tick",a)};jees.E=a})();this.jees=this.jees||{};(function(){function a(){throw"jees.SET \u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}a.CONFIG_FILE="../assets/configs/jees.default.config";a.SKIN_FILE="../assets/images/skin_default.png";a._config=null;a._timestamp=0;a._fps=30;a._canvas=null;a._width=0;a._height=0;a._sound=!1;a._debug=!1;a.getCanvas=function(){return this._canvas};a.getWidth=function(){return this._width};a.getHeight=function(){return this._height};a.getFPS=function(){return this._fps};a.setFPS=function(a){this._fps=a};a.getTimestamp=function(){return this._timestamp};a.setTimestamp=function(a){this._timestamp=a};a.getConfig=function(){return this._config};a.getSkin=function(){return this._skin};a.enableSound=function(){return this._sound};a.enableDebug=function(){return this._debug};a.startup=function(){var a=this._config.Setting;this._canvas=a.canvas;this._fps=a.fps;this._width=0!=a.width?a.width:document.documentElement.clientWidth||document.body.clientWidth;this._height=0!=a.height?a.height:document.documentElement.clientHeight||document.body.clientHeight;this._sound=a.sound;this._skin=a.skin};jees.SET=a})();this.jees=this.jees||{};(function(){function a(){throw"jees.MM\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}a._ids=[];a._modules=new Map;a._module=null;a.enter=function(a){if(void 0==a||!a instanceof jees.Module)throw"\u52a0\u5165\u6a21\u5757\u5bf9\u8c61\u9519\u8bef";if(this._modules.has(a.getId()))throw"\u6dfb\u52a0\u4e86\u91cd\u590d\u7684\u6a21\u5757["+a.getId()+"]";null!=this._module&&this._module.interrupt();this._ids.push(a.getId());this._modules.set(a.getId(),a);this._module=a;a.enter()};a.leave=function(){if(null!=this._module&&0!=this._ids.length){var a=this._ids.pop();this._module.leave();this._modules.delete(a);0!=this._modules.size&&(this._module=this._modules.get(this._ids[this._ids.length-1]),this._module.recovery())}};a.clear=function(){for(;0<this._modules.length;)this.leave()};a.update=function(a){for(var c=$jscomp.makeIterator(this._modules.values()),b=c.next();!b.done;b=c.next())b.value.update(a)};a.current=function(){return this._module};jees.MM=a})();this.jees=this.jees||{};(function(){function a(){throw"jees.RM\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}a._queue=null;a._loader=null;a._resources=null;a._callback=null;a._handler=null;a.DEFAULT_GROUP="default";a.startup=function(){this._loader=[];this._resources=new Map;this._resources.set(this.DEFAULT_GROUP,new Map);this._queue=new createjs.LoadQueue(!1,"","Anonymous");this._queue.maintainScriptOrder=!0};a.reload=function(){jees.SET.enableSound()&&this._queue.installPlugin(createjs.Sound)};a.getProgress=function(){return this._queue.progress};a.add=function(a,c,e){var b;void 0==e?b=this._resources.get(this.DEFAULT_GROUP):this._resources.has(e)?b=this._resources.get(e):(b=new Map,this._resources.set(e,b));if(b.has(a))throw"\u5df2\u5b58\u5728\u540c\u540d\u8d44\u6e90["+a+"]";this._loader.push({id:a,src:c,group:e})};a.onload=function(a){if(null!=this._callback)throw"\u4e0a\u6b21\u52a0\u8f7d\u5c1a\u672a\u7ed3\u675f\u3002";if(null==this._callback&&"function"===typeof a){this._callback=a;var c=this;this._handler=jees.E.bind(this._queue,"complete",function(a){c._complete_handler(a)})}0!=this._loader.length?this._queue.loadManifest(this._loader):this._complete_handler()};a.get=function(a,c){var b;b=void 0!=c?jees.RM._resources.get(c):jees.RM._resources.get(this.DEFAULT_GROUP);if(b.has(a))return b.get(a);throw"\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u8d44\u6e90\uff1aRES\x3d["+a+", GROUP\x3d["+c+"]";};a.del=function(a){this._resources.delete(a);this._queue.remove(a)};a._complete_handler=function(a){null!=this._handler&&jees.E.unbind(this._queue,"complete",this._handler);this._loader.forEach(function(c){var a=jees.RM._queue.getResult(c.id);jees.RM._resources.get(c.group).set(c.id,a)});this._loader=[];this._callback(a);this._callback=null};jees.RM=a})();this.jees=this.jees||{};(function(){function a(){throw"CanvasManager cannot be instantiated.";}a.Container={BACK:-2,BOTTOM:-1,DEFAULT:0,TOP:1,POPUP:2,SYSTEM:3,DEBUG:4,CONSOLE:5};a.LEVEL_UI=0;a._caches=null;a.__update_cache_level=function(a){this._caches.has(a)&&(a=this._caches.get(a),0<a.length&&a.pop().initialize())};a._update_cache=function(){this.__update_cache_level(a.LEVEL_UI)};a.startup=function(){this._caches=new Map};a.update=function(a){this._update_cache()};a.addChild=function(a,c){if(this._caches.has(c)){var b=this._caches.get(c);b.push(a)}else b=[],b.push(a),this._caches.set(c,b)};jees.CM=a})();this.jees=this.jees||{};(function(){function a(c,a){this._group=void 0==c?jees.RM.DEFAULT_GROUP:c;this._suffix=void 0==a?"":a}var b=a.prototype;b.register=function(c,a){if(0<this._suffix.length)if(-1!=a.lastIndexOf("."+this._suffix))jees.RM.add(c,a,this._group);else throw"\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e";else jees.RM.add(c,a,this._group)};b.onload=function(a){jees.RM.onload(a)};b.get=function(a){return null!=this._group?jees.RM.get(a,this._group):jees.RM.get(a)};b.getContent=function(a){return eval("("+this.get(a)+")")};jees.FileLoadManager=a})();this.jees=this.jees||{};(function(){function a(){throw"jees.APP\u4e0d\u5141\u8bb8\u505a\u521d\u59cb\u5316\u64cd\u4f5c\u3002";}a._canvas=null;a._stage=null;a._module=null;a._inited=!1;a._handler=null;a._loader=[];a.startup=function(a){var c=this;c._module=a;jees.RM.startup();jees.Skins.register("default",jees.SET.SKIN_FILE);jees.Config.register("config",jees.SET.CONFIG_FILE);this.addLoader(function(){jees.Config.onload(function(){c._initialize()})});this._handler=jees.E.tick(function(a){c.update(a)})};a.update=function(a){0<this._loader.length&&this._loader.pop().call();if(this._inited&&(null!=this._module&&(jees.MM.enter(this._module),this._module=null),!a.paused)){a=jees.CJS.getTicker().getTime();var c=a-jees.SET.getTimestamp();jees.SET.setTimestamp(a);jees.MM.update(c);jees.CM.update();this._stage.update()}};a.addChild=function(a){this._stage.addChild(a)};a.addLoader=function(a){this._loader.push(a)};a.getConfig=function(){return this._config};a.getTimestamp=function(){};a.getCanvas=function(){return this._canvas};a.getScreenSize=function(){return{w:this._canvas.width,h:this._canvas.height}};a.setFPS=function(a){jees.SET.setFPS(a);jees.CJS.getTicker().framerate=jees.SET.getFPS()};a.screenOrientation=function(){};a.screenResize=function(){};a._initialize=function(){jees.SET._config=jees.Config.getContent("config");jees.SET.startup();this._canvas=document.getElementById(jees.SET.getCanvas());this._stage=new createjs.StageGL(this._canvas);this._canvas.width=jees.SET.getWidth();this._canvas.height=jees.SET.getHeight();this._stage.updateViewport(jees.SET.getWidth(),jees.SET.getHeight());this.setFPS(jees.SET.getFPS());jees.RM.reload();jees.CM.startup();jees.Skins.startup();this._inited=!0};jees.APP=a})();this.jees=this.jees||{};this.jees.EX=this.jees.EX||{};(function(){function a(a,c){this.FileLoadManager_constructor(a,c)}createjs.extend(a,jees.FileLoadManager);jees.EX.ConfigManager=createjs.promote(a,"FileLoadManager")})();this.jees=this.jees||{};this.jees.EX=this.jees.EX||{};(function(){function a(a,b){this.FileLoadManager_constructor(a,b);this._layouts=new Map}var b=createjs.extend(a,jees.FileLoadManager);b._layout_property_2_widget=function(a,b){var c=this,e=null,g=a?a.toString().toLowerCase():"widget";if("widget"==g)e=new jees.UI.Widget;else if("panel"==g)e=new jees.UI.Panel;else if("textbox"==g)e=new jees.UI.TextBox;else if("imagebox"==g)e=new jees.UI.ImageBox;else if("button"==g)e=new jees.UI.Button;else throw"\u9519\u8bef\u7684\u63a7\u4ef6\u7c7b\u578b\uff1a"+a;for(var k in e)b.hasOwnProperty(k)&&(e[k]=b[k]);for(k in e.property)b.hasOwnProperty(k)&&(e.property[k]=b[k]);e.property.childs&&e.property.childs.forEach(function(a){for(var b in a){e.addChild(c._layout_property_2_widget(b,a[b]));break}});return e};b._layout_2_widget=function(a){var c=null,b;for(b in a){c=this._layout_property_2_widget(b,a[b]);break}c.initialize();return c};b.load=function(a){var c;this._layouts.has(a)?c=this._layouts.get(a):(c=this._layout_2_widget(this.getContent(a)),this._layouts.set(a,c));return c};b.unload=function(a){this._layouts.has(a)&&this._layouts.delete(a)};jees.EX.LayoutManager=createjs.promote(a,"FileLoadManager")})();this.jees=this.jees||{};this.jees.EX=this.jees.EX||{};(function(){function a(a,b){this.FileLoadManager_constructor(a,b);this._config=null;this._skin="default"}var b=createjs.extend(a,jees.FileLoadManager);b.startup=function(){this._config=jees.SET.getConfig().Skin;this._skin=jees.SET.getSkin()};b.getSkin=function(a,b){return{resource:this.get(void 0!=b?b:this._skin),property:this._config[a]}};jees.EX.SkinManager=createjs.promote(a,"FileLoadManager")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function a(a,c,e,d){this._type=void 0!=a?a.toLowerCase():"none";this._group=void 0!=d?d:"default";a=jees.Skins.getSkin(this._type,this._group);this._resource=a.resource;this._rect=a.property.rect;d=void 0!=c?c:this._rect.w;var b=void 0!=e?e:this._rect.h;if("panel"==this._type||"panel-highlight"==this._type)this._regions=jees.UT.Grid(a.property.region,this._rect.w,this._rect.h,d,b);var g=jees.CJS.newBitmap(this._resource);g.sourceRect=jees.CJS.newRect(this._rect.x,this._rect.y,this._rect.w,this._rect.h);var k=jees.CJS.newContainer(),m=this._rect.x,p=this._rect.y;this._regions.forEach(function(a){var c=g.clone();c.sourceRect=jees.CJS.newRect(m+a.x,p+a.y,a.w,a.h);c.x=a.dx;c.y=a.dy;c.scaleX=a.sw;c.scaleY=a.sh;k.addChild(c)});k.cache(0,0,c,e);this.bitmapCache=k.bitmapCache}a.prototype.getCacheDataURL=function(){return this.bitmapCache.getCacheDataURL()};jees.UI.Skin=a})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function a(){this.height=this.width=this.y=this.x=0;this.scaleY=this.scaleX=1;this.style=this.alignX=0;this.enableMask=!1;this.childs=this.resource=this.skinResource=this.layoutGroup=null}var b=a.prototype;b.getPosition=function(){return{x:this.x,y:this.y}};b.setPosition=function(a,b){a&&(this.x=a);b&&(this.y=b)};b.getSize=function(){return{w:this.width,h:this.height}};b.setSize=function(a,b){a&&(this.width=a);b&&(this.height=b)};b.getScale=function(){return{x:this.scaleX,y:this.scaleY}};b.setScale=function(a,b){a&&(this.scaleX=a);b&&(this.scaleY=b)};jees.UI.Property=a})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function a(){this.Container_constructor();this.h=this.w=0;this.property=new jees.UI.Property;this._mask=this._skin=this._object=null}var b=createjs.extend(a,createjs.Container);b.resize=function(){console.log("--Widget.resize",this.parent);this._init_property()};b.initialize=function(){this._init_property();this._init_childs();jees.APP.addChild(this)};b.getSize=function(){return{w:this.w,h:this.h}};b.setSize=function(a,b){this.property.setSize(a,b);this._reset_size();this._object&&this._object instanceof jees.Widget&&this._object.setSize(this.w,this.h)};b.getPosition=function(){return{x:this.x,y:this.y}};b.setPosition=function(a,b){this.property.setPosition(a,b);this._reset_position()};b.getScale=function(){return{x:this.scaleX,y:this.scaleY}};b.setScale=function(a,b){this.property.setScale(a,b);this._reset_scale()};b._cache=function(){this.cache(0,0,this.w,this.h);this._object&&this._object.cache(0,0,this.w,this.h)};b._init_property=function(){this._reset_size();this._reset_position();this._reset_scale();this._reset_mask()};b._init_childs=function(){this._object&&this.addChildAt(this._object,0);if(this.children)for(var a=0;a<this.children.length;a++){var b=this.children[a];b instanceof jees.UI.Widget?b.initialize():(b instanceof jees.UI.TextBox||b instanceof jees.UI.ImageBox)&&b.initialize()}};b._calculate_size=function(a,b,d){return a&&"string"==typeof a?"auto"==a.toLowerCase()?b-d:-1!=a.indexOf("%")?parseInt(a.substring(0,a.length-1))*b/100:parseInt(a.substring(0,a.length-1)):a};b._reset_size=function(){var a=null,a=this.parent instanceof createjs.Stage||this.parent instanceof createjs.StageGL?jees.APP.getScreenSize():this.parent?this.parent.getSize():jees.APP.getScreenSize(),b=0,d=0,f=this.property.getSize();if(this.property.layoutGroup&&this.parent){var g=this;("string"==typeof f.w&&"auto"==f.w.toLowerCase()||"string"==typeof f.h&&"auto"==f.h.toLowerCase())&&this.parent.children.forEach(function(a){a!=g&&a.property.layoutGroup==g.property.layoutGroup&&(0!=a.w&&0!=a.h||a._reset_size(),b+=a.w,d+=a.h)})}this.w=this._calculate_size(f.w,a.w,b);this.h=this._calculate_size(f.h,a.h,d)};b._reset_position=function(){var a;a=this.parent instanceof createjs.Stage||this.parent instanceof createjs.StageGL?jees.APP.getScreenSize():this.parent?this.parent.getSize():jees.APP.getScreenSize();var b=this.property.getPosition();a=null!=this.parent?a:jees.APP.getScreenSize();var d=b.x,b=b.y;2==this.property.alignX?d=a.w-this.getSize().w-d:1==this.property.alignX&&(d=(a.w-this.getSize().w)/2+d);this.x=d;this.y=b};b._reset_mask=function(){this.property.enableMask&&(this._mask=jees.CJS.newShape(this.w,this.h));var a;a=this.parent instanceof createjs.Stage||this.parent instanceof createjs.StageGL?!1:this.parent?this.parent.property.enableMask:!1;this.parent&&a&&this._object&&(this._object.mask=this.parent._mask)};b._reset_scale=function(){var a=this.property.getScale();this.scaleX=a.x;this.scaleY=a.y};jees.UI.Widget=createjs.promote(a,"Container")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function a(){this.Widget_constructor();this.property.skinResource="Panel"}var b=createjs.extend(a,jees.UI.Widget);b.initialize=function(){this._reset_size();this._reset_position();this.property.resource&&""!=this.property.resource?this._init_custom():this._init_skin();this._reset_scale();this._reset_mask();this._init_childs()};b._init_custom=function(){var a=this.getSize(),b=jees.Images.get(this.property.resource),d=a.w,a=a.h,f=this.property.style;this._object=new jees.UI.ImageBox(b);1==f?this.setScale(d/b.width,a/b.height):2==f&&(f=this.property.getScale(),d/=f.x,a/=f.y,this._object=jees.CJS.newShape(),this._object.graphics.beginBitmapFill(b).drawRect(0,0,d,a),this._object.cache(0,0,d,a))};b._init_skin=function(){var a=this.getSize();this._skin=new jees.UI.Skin(this.property.skinResource,a.w,a.h,jees.SET.getSkin());this.property.resource=this._skin.getCacheDataURL();this._object=new jees.UI.ImageBox(this.property.resource)};jees.UI.Panel=createjs.promote(a,"Widget")})();this.jees=this.jees||{};(function(){function a(){this.Widget_constructor();this.property.skinResource="Button";this.text="";this._wgt_text=new jees.UI.TextBox}a.NORMAL=1;a.NORMAL_HIGH=2;a.NORMAL_PUSH=4;a.NORMAL_DISABLE=8;a.CHECK=16;a.CHECK_HIGH=32;a.CHECK_PUSH=64;a.CHECK_DISABLE=128;createjs.extend(a,jees.UI.Widget).initialize=function(){};jees.UI.Button=createjs.promote(a,"Widget")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function a(a){this.Bitmap_constructor(a);this.property=new jees.UI.Property;this.state=!1;this.region=null}var b=createjs.extend(a,createjs.Bitmap);b.initialize=function(){if(this.property.resource){-1!=this.property.resource.lastIndexOf(".")?(this.image=document.createElement("img"),this.image.src=this.property.resource):(this.image=jees.Images.get(this.property.resource),this.state=!0);if(this.region){var a=this.region.split(",");if(4!=a.length)throw"\u5206\u5272\u533a\u57df\u9519\u8bef:"+a;this.setRect(a[0],a[1],a[2],a[3])}else console.log(this.image.width,this.image.height,this.getBounds()),this.setRect(0,0,this.image.width,this.image.height);this._reset_position();this._reset_size()}};b.getSize=function(){return this.property.getSize()};b.setSize=function(a,b){this.property.setSize(a,b);this._reset_size()};b.getPosition=function(){return{x:this.x,y:this.y}};b.setPosition=function(a,b){this.property.setPosition(a,b);this._reset_position()};b.getScale=function(){return{x:this.scaleX,y:this.scaleY}};b.setScale=function(a,b){this.property.setScale(a,b);this._reset_scale()};b.setRect=function(a,b,d,f){this.region=a+","+b+","+d+","+f;this.sourceRect=jees.CJS.newRect(a,b,d,f);this.setBounds(a,b,d,f);this.cache(0,0,d,f)};b._reset_size=function(){if(this.state){var a=this.property.getSize(),b=this.getBounds();0==a.w&&(this.property.setSize(b.width,a.h),a=this.property.getSize());0==a.h&&(this.property.setSize(a.w,b.height),a=this.property.getSize());a.w!=b.width&&(this.property.scaleX=a.w/b.width);a.h!=b.height&&(this.property.scaleY=a.h/b.height);this._reset_scale()}};b._reset_position=function(){var a=this.property.getPosition(),b=null!=this.parent?this.parent.getSize():jees.APP.getScreenSize(),d=a.x,a=a.y;2==this.property.alignX?d=b.w-this.getSize().w-d:1==this.property.alignX&&(d=(b.w-this.getSize().w)/2+d);this.x=d;this.y=a};b._reset_scale=function(){if(this.state&&(this.scaleX=this.property.scaleX,this.scaleY=this.property.scaleY,this.region)){var a=this.getBounds();this.sourceRect=jees.CJS.newRect(0,0,a.width,a.height)}};jees.UI.ImageBox=createjs.promote(a,"Bitmap")})();this.jees=this.jees||{};this.jees.UI=this.jees.UI||{};(function(){function a(){this.Text_constructor("","","");this.property=new jees.UI.Property;this._font_italic=this._font_bold="";this._font_size=12;this._font_style="Arial";this._drawText=this._reset_text}var b=createjs.extend(a,createjs.Text);b.initialize=function(){this.font=this._get_font();this.lineHeight=this._font_size;this.color="#000000";this._cache()};b.getSize=function(){return{w:this.getMeasuredWidth(),h:this.getMeasuredHeight()}};b.setPosition=function(a,b){this.property.setPosition(a,b);this._reset_position()};b.getPosition=function(){return{x:this.x,y:this.y}};b.getColor=function(){return this.color};b.setColor=function(a){this.color=a};b.setFont=function(a,b,d,f){this._set_font(a,b,d,f);this.font=this._get_font()};b.getFontStyle=function(){return this._font_style};b.setFontStyle=function(a){this._font_style=a;this.font=this._get_font()};b.getFontSize=function(){return this._font_size};b.setFontSize=function(a){this.lineHeight=this._font_size=a;this.font=this._get_font()};b.getAlign=function(){return this.textAlign};b.setAlign=function(a){this.textAlign=a};b.getBaseline=function(){return this.textBaseline};b.setBaseline=function(a){this.textBaseline=a};b.getMaxWidth=function(){return this.maxWidth};b.setMaxWidth=function(a){this.maxWidth=a};b.getLineWidth=function(){return this.lineWidth};b.setLineWidth=function(a){this.lineWidth=a};b.getText=function(){return this.text};b.setText=function(a){this.text=a};b.isBold=function(){return""!=this._font_bold};b.setBold=function(a){this._font_bold=a?"bold":"";this.font=this._get_font()};b.isItalic=function(){return""!=this._font_bold};b.setItalic=function(a){this._font_italic=a?"italic":"";this.font=this._get_font()};b._cache=function(){var a=this.getSize();this.cache(0,0,a.w,a.h)};b._get_font=function(){return this._font=this._font_italic+" "+this._font_bold+" "+this._font_size+"px "+this._font_style};b._set_font=function(a,b,d,f){this._font_size=a;this._font_style=b?b:"Arial";this._font_italic=d?"italic":"";this._font_bold=f?"bold":""};b._reset_position=function(){var a=this.property.getPosition(),b=null!=this.parent?this.parent.getSize():jees.APP.getScreenSize(),d=a.x,a=a.y;2==this.property.alignX?d=b.w-this.getSize().w-d:1==this.property.alignX&&(d=(b.w-this.getSize().w)/2+d);this.x=d;this.y=a};b._reset_text=function(a,b,d){var c=!!a;c||(a=createjs.Text._workingContext,a.save(),this._prepContext(a));for(var e=this.lineHeight||this.getMeasuredLineHeight(),k=0,m=0,p=String(this.text).split(/(?:\r\n|\r|\n)/),r=0,w=p.length;r<w;r++){var h=p[r],l=null;if(null!=this.lineWidth&&(l=a.measureText(h).width)>this.lineWidth){for(var q=h.split(/(\s|[\u4e00-\u9fa5]+)/),h=[],l=0;l<q.length;l++){var n=q[l];""!=n&&(/([\u4e00-\u9fa5]+)/.test(n)?h=h.concat(n.split("")):h.push(n))}for(var q=h,h=q[0],l=a.measureText(h).width,n=1,u=q.length;n<u;n+=2){var t=n+1<u?q[n+1]:"",v=a.measureText(q[n]+t).width;l+v>this.lineWidth?("s"!=q[n]&&(h+=q[n]),c&&this._drawTextLine(a,h,m*e),d&&d.push(h),l>k&&(k=l),h=t,l=a.measureText(h).width,m++):(h+=q[n]+t,l+=v)}}c&&this._drawTextLine(a,h,m*e);d&&d.push(h);b&&null==l&&(l=a.measureText(h).width);l>k&&(k=l);m++}b&&(b.width=k,b.height=m*e);c||a.restore();return b};jees.UI.TextBox=createjs.promote(a,"Text")})();
//# sourceMappingURL=jees.min.js.map
